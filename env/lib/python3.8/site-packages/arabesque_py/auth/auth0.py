import json

import requests


def get_access_token(config) -> str:
    payload = {
        "client_id": config.auth0_client_id,
        "client_secret": config.auth0_client_secret,
        "audience": config.auth0_audience,
        "grant_type": "client_credentials",
    }
    headers = {"content-type": "application/json"}
    res = requests.post(
        "https://arabesque2.auth0.com/oauth/token",
        data=json.dumps(payload),
        headers=headers,
    )
    data = res.json()

    result = data["access_token"]

    return result
