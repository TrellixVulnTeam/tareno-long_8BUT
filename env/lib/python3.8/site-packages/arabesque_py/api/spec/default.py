"""
Helpers for generation the APISpec.

Attributes:
    DEFAULT_OPENAPI_VERSION (str): The default OpenAPI version to use.
"""
from apispec import APISpec

DEFAULT_OPENAPI_VERSION = "3.0.2"


def get_api_spec(
    service: str,
    service_version: str,
    openapi_version: str = DEFAULT_OPENAPI_VERSION,
    plugins: list = None,
    service_info: dict = None,
    contact_name: str = None,
    contact_email: str = None,
    service_description: str = None,
) -> APISpec:
    """
    Generates the API spec with the defaults

    Args:
        service (str): The name of the service
        service_version (str): The version of the service
        openapi_version (str): The OpenAPI version to use
        plugins (list): List of APISpec plugins to use
        service_info (dict): Any additional info
        contact_name (str): The contact name
        contact_email (str): The contact email
        service_description (str): The description of the service

    Returns:
        APISpec: The api spec.
    """
    if service_info is None:
        service_info = {}

    if plugins is None:
        plugins = []

    if contact_name is not None and contact_email is not None:
        service_info["contact"] = {
            "name": contact_name,
            "email": contact_email,
        }

    if service_description is not None:
        service_info["description"] = service_description

    return APISpec(
        title=service,
        version=service_version,
        openapi_version=openapi_version,
        info=service_info,
        plugins=plugins,
    )
