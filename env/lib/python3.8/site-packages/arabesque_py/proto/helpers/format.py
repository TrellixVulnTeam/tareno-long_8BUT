"""
Formatting helpers for protobufs. Useful for debugging and test suites.

TODO:
    (@miles-arabesque): Add tests.
"""
import typing

from google.protobuf import json_format
from google.protobuf.message import Message


def proto_to_dict(proto: Message) -> typing.Dict:
    """
    Converts a protobuf into a dict.
    Args:
        proto (Message): The protobuf message to convert.

    Returns:
        typing.Dict: The converted dict.
    """
    return json_format.MessageToDict(
        proto, preserving_proto_field_name=True, including_default_value_fields=True
    )
